<html>
    <head>
        <title>
            Wikipedia table viewer
        </title>
    </head>
    <body>
        <p>ABC</p>
        <div id="newDiv"></div>
        
        <div id = "tableDiv">

        </div>
        <div>
            <button>Previous</button>
            <button>Next</button>
        </div>
    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
        // read text from URL location
        // function getText(){
        //     var request = new XMLHttpRequest();
        //     request.open('GET', 'https://raw.githubusercontent.com/anonGitAcc/table-viewer.github.io/main/filtered_tables_to_crowdsource_v2_only200.csv', true);
        //     request.send(null);
        //     request.onreadystatechange = function () {
        //         if (request.readyState === 4 && request.status === 200) {
        //             var type = request.getResponseHeader('Content-Type');
        //             if (type.indexOf("text") !== 1) {
        //                 console.log("Here");
        //                 console.log(request.responseText);
        //                 return request.responseText;
        //             }
        //         }
        //     }
        // }

        // window.onload = function(){
        //     var d = document.getElementById("newDiv");
        //     var request = new XMLHttpRequest();
        //     request.open('GET', 'https://raw.githubusercontent.com/anonGitAcc/table-viewer.github.io/main/filtered_tables_to_crowdsource_v2_only200.csv', true);
        //     request.send(null);
        //     request.onreadystatechange = function () {
        //         if (request.readyState === 4 && request.status === 200) {
        //             var type = request.getResponseHeader('Content-Type');
        //             if (type.indexOf("text") !== 1) {
        //                 var csv_contents = request.responseText;
        //                 d.innerHTML = "<p>"+ csv_contents + "</p>";
        //             }
        //         }
        //     }
            
        
        //     // load all tables

        
        // }


        $(document).ready(function() {
            var d = document.getElementById("newDiv");
            $.ajax({
            url: 'http://query.yahooapis.com/v1/public/yql',
            data: { 
                q: "select * from csv where url='https://raw.githubusercontent.com/anonGitAcc/table-viewer.github.io/main/filtered_tables_to_crowdsource_v2_only200.csv' and columns='csvtable'",
                format: 'json'
            },
            dataType: 'jsonp',
            success: function(rsp) {
                console.log(rsp);
                var csv_contents = request.responseText;
                d.innerHTML = "<p>"+ csv_contents + "</p>";
                // iterate over rsp.query.results.row (an array)
            }
            });
        });
    </script>
    </body>
</html>
